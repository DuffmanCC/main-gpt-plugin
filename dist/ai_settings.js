import{d as S,c as g,o as r,a,t as z,z as T,_ as B,r as l,e as n,i as j,k as $,w as i,F as G,g as K,f as p,u as C,q,s as U,x as V}from"./style.js";import{c as E,b as F,_ as J}from"./a-text.vue_vue_type_script_setup_true_lang.js";import{_ as O,a as W,d as H}from"./a-select.vue_vue_type_script_setup_true_lang.js";import{a as M}from"./constants.js";import{a as D}from"./tools.js";const Q={class:"tw:font-arboria tw:relative tw:mt-8 tw:mr-8 tw:flex tw:flex-col tw:gap-2"},X={class:"tw:font-bold tw:text-2xl tw:mb-2"},Y={class:"tw:flex tw:flex-col tw:gap-6 tw:py-4"},Z=S({__name:"a-page-wrapper",props:{pageTitle:String},setup(s){return(o,d)=>(r(),g("div",Q,[a("h1",X,z(s.pageTitle),1),a("div",Y,[T(o.$slots,"default")])]))}}),ee={},te={class:"tw:p-6 tw:bg-white tw:rounded-xl tw:flex tw:flex-col tw:gap-8"};function ae(s,o){return r(),g("section",te,[T(s.$slots,"default")])}const R=B(ee,[["render",ae]]),ne={class:"tw:flex tw:items-center tw:gap-4"},A=S({__name:"ai-settings-field",props:{id:String,label:String,value:String,howToLink:String,createLink:String},emits:["input"],setup(s,{emit:o}){const d=s,m=o,w=l(d.value);function v(c){w.value=c,m("input",c)}return(c,f)=>(r(),g("div",ne,[n(E,{id:s.id,label:s.label,value:w.value,class:"tw:w-full tw:max-w-lg",onInput:f[0]||(f[0]=x=>v(x))},null,8,["id","label","value"])]))}}),se={class:"tw:flex tw:flex-col tw:gap-3"},oe=a("h2",{class:"tw:text-3xl! tw:m-0! tw:font-normal!"},"Pineconne",-1),ie=a("p",{class:"tw:text-xl! tw:m-0! tw:font-light"},[p(" Create an account on "),a("a",{href:"https://www.pinecone.io/",class:"tw:text-blue-500 tw:underline",target:"_blank",rel:"noopener noreferrer"}," Pinecone.io "),p(" and paste the api key below. ")],-1),le={class:"tw:mt-4"},re={class:"tw:flex tw:flex-col tw:gap-4"},pe=a("h2",{class:"tw:text-3xl! tw:m-0! tw:font-normal!"},"Open-AI",-1),ce=a("p",{class:"tw:text-xl! tw:m-0! tw:font-light"},[p(" Create an account on "),a("a",{href:"https://openai.com/",class:"tw:text-blue-500 tw:underline",target:"_blank",rel:"noopener noreferrer"}," OpenAI.com "),p(" and paste the api key and organization below. ")],-1),ue={class:"tw:mt-4"},de={class:"tw:flex tw:flex-col tw:gap-4"},we=S({__name:"ai-settings",setup(s){const o=j("aiSettingsData");if(!o)throw new Error("aiSettingsData is undefined");const{openAiApiKey:d,openAiOrg:m,pineconeApiKey:w,ajaxAction:v,ajaxNonce:c,ajaxUrl:f,gdprSemaphore:x,pageTitle:L}=o,h=l(d),k=l(m),b=l(w),P=l(x),u=l([]);async function y(_){const e=await H(f,v,c,JSON.stringify(_));e.success?D(u,"success",e.data.message):D(u,"error",e.error,0)}function N(_){u.value=u.value.filter(e=>e.id!==_)}return(_,e)=>(r(),$(Z,{pageTitle:C(L)},{default:i(()=>[n(F,{class:"tw:top-12"},{default:i(()=>[(r(!0),g(G,null,K(u.value,t=>(r(),$(J,{key:t.id,type:t.type,message:t.message,time:t.time,onClose:_e=>N(t.id)},null,8,["type","message","time","onClose"]))),128))]),_:1}),n(R,null,{default:i(()=>[a("div",se,[oe,ie,n(A,{id:"pinecone_api_key",label:"Pinecone api key",value:b.value,howToLink:"#",createLink:"#",onInput:e[0]||(e[0]=t=>b.value=t)},null,8,["value"]),a("div",le,[n(O,{onClick:e[1]||(e[1]=t=>y({pinecone_api_key:b.value}))},{default:i(()=>[p(" Update ")]),_:1})])]),a("div",re,[pe,ce,n(A,{id:"openai_api_key",label:"Open AI api key",value:h.value,howToLink:"#",createLink:"#",onInput:e[2]||(e[2]=t=>h.value=t)},null,8,["value"]),n(A,{id:"openai_organization",label:"Open AI api organization",value:k.value,howToLink:"#",createLink:"#",onInput:e[3]||(e[3]=t=>k.value=t)},null,8,["value"]),a("div",ue,[n(O,{onClick:e[4]||(e[4]=t=>y({openai_api_key:h.value,openai_organization:k.value}))},{default:i(()=>[p(" Update ")]),_:1})])])]),_:1}),n(R,null,{default:i(()=>[a("div",de,[n(W,{id:"gdpr_semaphore",label:"GDPR Configuration",class:"tw:max-w-lg",options:C(M),selectedOption:P.value,help:`
            <ul><li><span class='tw:font-semibold'>Always:</span> force AiChatter to always require GDPR for the chatter and for the lead.</li>
              <li><span class='tw:font-semibold'>Never:</span> force AiChatter to never require GDPR not lead GDPR.</li>
              <li><span class='tw:font-semibold'>Configurable:</span> as it is now.</li>
            </ul>
          `,onSelectOption:e[5]||(e[5]=t=>y({gdpr_semaphore:t}))},null,8,["options","selectedOption"])])]),_:1})]),_:1},8,["pageTitle"]))}});let I={};I=window.ai_settings.data;const fe=q({setup(){V("aiSettingsData",I)},render:()=>U(we)});fe.mount("#main_ai_settings");
