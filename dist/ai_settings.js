import{d as P,o as l,c as v,a,t as q,z as I,_ as U,r as i,b as n,i as F,k as $,w as r,u as R,f as J,F as W,e as p,h as H,q as M,s as Q,x as X}from"./wug-style.js";import{c as Y,_ as Z,b as ee}from"./a-text.vue_vue_type_script_setup_true_lang.js";import{_ as V,a as te,d as ae}from"./a-select.vue_vue_type_script_setup_true_lang.js";import{_ as ne}from"./a-checkbox.vue_vue_type_script_setup_true_lang.js";import{a as ie}from"./constants.js";import{a as D}from"./tools.js";const se={class:"tw:font-arboria tw:relative tw:mt-8 tw:mr-8 tw:flex tw:flex-col tw:gap-2"},oe={class:"tw:font-bold tw:text-2xl tw:mb-2"},le={class:"tw:flex tw:flex-col tw:gap-6 tw:py-4"},re=P({__name:"a-page-wrapper",props:{pageTitle:String},setup(s){return(o,d)=>(l(),v("div",se,[a("h1",oe,q(s.pageTitle),1),a("div",le,[I(o.$slots,"default")])]))}}),pe={},ce={class:"tw:p-6 tw:bg-white tw:rounded-xl tw:flex tw:flex-col tw:gap-8"};function ue(s,o){return l(),v("section",ce,[I(s.$slots,"default")])}const T=U(pe,[["render",ue]]),de={class:"tw:flex tw:items-center tw:gap-4"},O=P({__name:"ai-settings-field",props:{id:String,label:String,value:String,howToLink:String,createLink:String},emits:["input"],setup(s,{emit:o}){const d=s,x=o,f=i(d.value);function h(c){f.value=c,x("input",c)}return(c,w)=>(l(),v("div",de,[n(Y,{id:s.id,label:s.label,value:f.value,class:"tw:w-full tw:max-w-lg",onInput:w[0]||(w[0]=A=>h(A))},null,8,["id","label","value"])]))}}),fe={class:"tw:flex tw:flex-col tw:gap-3"},we=a("h2",{class:"tw:text-3xl! tw:m-0! tw:font-normal!"},"Pineconne",-1),_e=a("p",{class:"tw:text-xl! tw:m-0! tw:font-light"},[p(" Create an account on "),a("a",{href:"https://www.pinecone.io/",class:"tw:text-blue-500 tw:underline",target:"_blank",rel:"noopener noreferrer"}," Pinecone.io "),p(" and paste the api key below. ")],-1),ge={class:"tw:mt-4"},me={class:"tw:flex tw:flex-col tw:gap-4"},ve=a("h2",{class:"tw:text-3xl! tw:m-0! tw:font-normal!"},"Open-AI",-1),xe=a("p",{class:"tw:text-xl! tw:m-0! tw:font-light"},[p(" Create an account on "),a("a",{href:"https://openai.com/",class:"tw:text-blue-500 tw:underline",target:"_blank",rel:"noopener noreferrer"}," OpenAI.com "),p(" and paste the api key and organization below. ")],-1),he={class:"tw:mt-4"},Ae={class:"tw:flex tw:flex-col tw:gap-4"},ye=P({__name:"ai-settings",setup(s){const o=F("aiSettingsData");if(!o)throw new Error("aiSettingsData is undefined");const{openAiApiKey:d,openAiOrg:x,pineconeApiKey:f,ajaxAction:h,ajaxNonce:c,ajaxUrl:w,isPineconeApiKeyValid:A,areOpenAiCredentialsValid:K,isActivePlugin:N,gdprSemaphore:z,pageTitle:B}=o,y=i(d),k=i(x),b=i(f),C=i(A),S=i(K),j=i(N),E=i(z),u=i([]);async function _(g){try{const e=await ae(w,h,c,JSON.stringify(g));D(u,"success",e.message),C.value=e.isPineconeApiKeyValid,S.value=e.areOpenAiCredentialsValid}catch(e){let t="Error saving settings";if(e instanceof Error){const m=JSON.parse(e.message);C.value=m.isPineconeApiKeyValid,S.value=m.areOpenAiCredentialsValid,t=m.message}D(u,"error",t,0)}}function G(g){u.value=u.value.filter(e=>e.id!==g)}return(g,e)=>(l(),$(re,{pageTitle:R(B)},{default:r(()=>[n(ee,{class:"tw:top-12"},{default:r(()=>[(l(!0),v(W,null,J(u.value,t=>(l(),$(Z,{key:t.id,type:t.type,message:t.message,time:t.time,onClose:m=>G(t.id)},null,8,["type","message","time","onClose"]))),128))]),_:1}),n(T,null,{default:r(()=>[a("div",fe,[we,_e,n(O,{id:"pinecone_api_key",label:"Pinecone api key",value:b.value,howToLink:"#",createLink:"#",onInput:e[0]||(e[0]=t=>b.value=t)},null,8,["value"]),a("div",ge,[n(V,{onClick:e[1]||(e[1]=t=>_({pinecone_api_key:b.value}))},{default:r(()=>[p(" Update ")]),_:1})])]),a("div",me,[ve,xe,n(O,{id:"openai_api_key",label:"Open AI api key",value:y.value,howToLink:"#",createLink:"#",onInput:e[2]||(e[2]=t=>y.value=t)},null,8,["value"]),n(O,{id:"openai_organization",label:"Open AI api organization",value:k.value,howToLink:"#",createLink:"#",onInput:e[3]||(e[3]=t=>k.value=t)},null,8,["value"]),a("div",he,[n(V,{onClick:e[4]||(e[4]=t=>_({openai_api_key:y.value,openai_organization:k.value}))},{default:r(()=>[p(" Update ")]),_:1})])])]),_:1}),C.value&&S.value?(l(),$(T,{key:0},{default:r(()=>[a("div",Ae,[n(ne,{label:"Active Plugin?",name:"is_active_plugin",id:"is_active",value:j.value,onChange:e[5]||(e[5]=t=>_({is_active_plugin:t}))},null,8,["value"]),n(te,{id:"gdpr_semaphore",label:"GDPR Configuration",class:"tw:max-w-lg",options:R(ie),selectedOption:E.value,help:`
            <ul><li><span class='tw:font-semibold'>Always:</span> force AiChatter to always require GDPR for the chatter and for the lead.</li>
              <li><span class='tw:font-semibold'>Never:</span> force AiChatter to never require GDPR not lead GDPR.</li>
              <li><span class='tw:font-semibold'>Configurable:</span> as it is now.</li>
            </ul>
          `,onSelectOption:e[6]||(e[6]=t=>_({gdpr_semaphore:t}))},null,8,["options","selectedOption"])])]),_:1})):H("",!0)]),_:1},8,["pageTitle"]))}});let L={};L=window.ai_settings.data;const ke=M({setup(){X("aiSettingsData",L)},render:()=>Q(ye)});ke.mount("#main_ai_settings");
