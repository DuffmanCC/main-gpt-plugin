import{d as $,i as B,r as c,l as D,c as n,o as a,e as l,w as f,a as i,F as _,g as p,k as w,b as v,u as t,t as V,q as M,s as N,x as L}from"./style.js";import{b as S,_ as E,c as g}from"./a-text.vue_vue_type_script_setup_true_lang.js";import{_ as F}from"./a-switch.vue_vue_type_script_setup_true_lang.js";import{_ as H}from"./a-textarea.vue_vue_type_script_setup_true_lang.js";import{_ as I,m as j}from"./metabox-body.js";import{a as q}from"./tools.js";const z={class:"tw:font-arboria"},J={class:"tw:flex tw:flex-col tw:gap-2"},O={key:1,class:"tw:flex tw:flex-col tw:gap-2"},P={class:"chat-message tw:max-w-xl tw:border tw:rounded-md tw:p-2 tw:bg-gray-300 tw:overflow-y-auto tw:max-h-72"},R={class:"tw:flex"},W={class:"tw:pr-2 tw:font-bold"},G=["innerHTML"],K=$({__name:"ai-chat",setup(U){const m=B("aiChatData");if(!m)throw new Error("aiChatData is undefined");const{timestamp:x,timestampValue:y,campaigns:C,campaignsValue:b,messages:T,messagesValue:u}=m,r=c([]),o=c(!0);function k(d){r.value=r.value.filter(s=>s.id!==d)}function A(d){return d.replace(/<img/g,'<img class="tw:w-48 tw:h-auto tw:rounded"')}return D(()=>{q(r,"info","These fields are readonly",0)}),(d,s)=>(a(),n("div",z,[l(I,{title:"AI Chat",hasAdvanced:!1}),l(j,null,{default:f(()=>[l(S,{class:"tw:top-2"},{default:f(()=>[(a(!0),n(_,null,p(r.value,e=>(a(),w(E,{key:e.id,type:e.type,message:e.message,time:e.time,onClose:X=>k(e.id)},null,8,["type","message","time","onClose"]))),128))]),_:1}),i("div",J,[l(F,{id:"messages",onText:"Plain text",offText:"html",type:"switch",size:"lg",value:o.value,onSwitch:s[0]||(s[0]=e=>o.value=!o.value)},null,8,["value"]),o.value?(a(),w(H,{key:0,id:t(T),label:"Messages",value:JSON.stringify(t(u)),readonly:""},null,8,["id","value"])):v("",!0),o.value?v("",!0):(a(),n("div",O,[s[1]||(s[1]=i("div",{class:"tw:font-semibold tw:text-gray-700 tw:text-lg"}," Messages ",-1)),i("div",P,[(a(!0),n(_,null,p(t(u),e=>(a(),n("div",R,[i("div",W,V(e.role)+":",1),i("div",{innerHTML:A(e.content)},null,8,G)]))),256))])]))]),l(g,{id:t(x),label:"Timestamp",value:t(y),readonly:""},null,8,["id","value"]),l(g,{id:t(C),label:"Campaigns",value:t(b),readonly:""},null,8,["id","value"])]),_:1})]))}});let h={};h=window.ai_chat.data;const Q=M({setup(){L("aiChatData",h)},render:()=>N(K)});Q.mount("#main_ai_chat");
