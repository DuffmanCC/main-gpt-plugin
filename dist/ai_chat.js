import{d as $,i as B,r as c,l as D,c as n,o as a,e as l,w as f,a as i,F as _,g as p,k as v,b as g,u as s,t as V,q as M,s as N,x as L}from"./style.js";import{b as S,_ as E,c as h}from"./a-text.vue_vue_type_script_setup_true_lang.js";import{_ as F}from"./a-switch.vue_vue_type_script_setup_true_lang.js";import{_ as H}from"./a-textarea.vue_vue_type_script_setup_true_lang.js";import{_ as I,m as j}from"./metabox-body.js";import{a as q}from"./tools.js";const z={class:"font-arboria"},J={class:"flex flex-col gap-2"},O={key:1,class:"flex flex-col gap-2"},P={class:"chat-message max-w-xl border rounded-md p-2 bg-gray-300 overflow-y-auto max-h-72"},R={class:"flex"},W={class:"pr-2 font-bold"},G=["innerHTML"],K=$({__name:"ai-chat",setup(U){const m=B("aiChatData");if(!m)throw new Error("aiChatData is undefined");const{timestamp:y,timestampValue:C,campaigns:w,campaignsValue:b,messages:T,messagesValue:u}=m,r=c([]),o=c(!0);function k(d){r.value=r.value.filter(t=>t.id!==d)}function A(d){return d.replace(/<img/g,'<img class="w-48 h-auto rounded"')}return D(()=>{q(r,"info","These fields are readonly",0)}),(d,t)=>(a(),n("div",z,[l(I,{title:"AI Chat",hasAdvanced:!1}),l(j,null,{default:f(()=>[l(S,{class:"top-2"},{default:f(()=>[(a(!0),n(_,null,p(r.value,e=>(a(),v(E,{key:e.id,type:e.type,message:e.message,time:e.time,onClose:X=>k(e.id)},null,8,["type","message","time","onClose"]))),128))]),_:1}),i("div",J,[l(F,{id:"messages",onText:"Plain text",offText:"html",type:"switch",size:"lg",value:o.value,onSwitch:t[0]||(t[0]=e=>o.value=!o.value)},null,8,["value"]),o.value?(a(),v(H,{key:0,id:s(T),label:"Messages",value:JSON.stringify(s(u)),readonly:""},null,8,["id","value"])):g("",!0),o.value?g("",!0):(a(),n("div",O,[t[1]||(t[1]=i("div",{class:"font-medium text-gray-700 text-lg"},"Messages",-1)),i("div",P,[(a(!0),n(_,null,p(s(u),e=>(a(),n("div",R,[i("div",W,V(e.role)+":",1),i("div",{innerHTML:A(e.content)},null,8,G)]))),256))])]))]),l(h,{id:s(y),label:"Timestamp",value:s(C),readonly:""},null,8,["id","value"]),l(h,{id:s(w),label:"Campaigns",value:s(b),readonly:""},null,8,["id","value"])]),_:1})]))}});let x={};x=window.ai_chat.data;const Q=M({setup(){L("aiChatData",x)},render:()=>N(K)});Q.mount("#main_ai_chat");
